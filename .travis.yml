language: generic

os : linux

env:
  matrix:
    - CONDA_PY=27
    - CONDA_PY=35
    - CONDA_PY=36

install:
  # Install Miniconda
  - |
    echo ""
    echo "Installing a fresh version of Miniconda."
    MINICONDA_URL="https://repo.continuum.io/miniconda"
    MINICONDA_FILE="Miniconda3-latest-Linux-x86_64.sh"
    curl -L -O "${MINICONDA_URL}/${MINICONDA_FILE}"
    bash $MINICONDA_FILE -b

  # Configure conda
  - |
    echo ""
    echo "Configuring conda."
    source /Users/travis/miniconda3/bin/activate root
    conda config --remove channels defaults
    conda config --add channels defaults
    conda config --add channels conda-forge
    conda config --set show_channel_urls true

  # Install conda-build, jinja2, and anaconda-client
  - conda install conda-build jinja2 anaconda-client

  # Useful for debugging any issues with conda
  - conda info
  - conda config --show-sources

script:
  - conda build ./conda  # assumes recipe directory is conda
